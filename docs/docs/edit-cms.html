<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<!--

    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE- 2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->

<link href="/css/odf.css" rel="stylesheet" type="text/css">

<title>How to edit the ODF Toolkit website</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-28945571-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>

<body>
  <div id="banner">
   <!-- <div id="bannerleft"><a alt="Apache ODF Toolkit (incubating)" href="http://incubator.apache.org/odftoolkit/">
      <img id="logo" alt="Apache ODF Toolkit (Incubating)" src="/odftoolkit/images/ooo-logo.png"/></a></div> -->
    <div id="bannerright"><a alt="Apache Incubator" href="http://incubator.apache.org">
      <img id="asf-logo" alt="Apache Incubator" src="/images/apache-incubator-logo.png"/></a></div>
   <div id="bannercenter"><br/>&nbsp;&nbsp;&nbsp;&nbsp;Apache ODF Toolkit (incubating)</div>
  </div>
  <div id="clear"></div>
  
  <div id="sidenav">
    <style type="text/css">
/* The following code is added by mdx_elementid.py
   It was originally lifted from http://subversion.apache.org/style/site.css */
/*
 * Hide class="elementid-permalink", except when an enclosing heading
 * has the :hover property.
 */
.headerlink, .elementid-permalink {
  visibility: hidden;
}
h2:hover > .headerlink, h3:hover > .headerlink, h1:hover > .headerlink, h6:hover > .headerlink, h4:hover > .headerlink, h5:hover > .headerlink, dt:hover > .elementid-permalink { visibility: visible }</style>
<h1 id="general">General<a class="headerlink" href="#general" title="Permanent link">&para;</a></h1>
<ul>
<li><a href="/odftoolkit/index.html">About</a></li>
<li><a href="/odftoolkit/downloads.html">Downloads</a></li>
<li><a href="http://incubator.apache.org/projects/odftoolkit.html">Incubator page</a></li>
<li><a href="/odftoolkit/license.html">License</a></li>
<li><a href="/odftoolkit/privacy.html">Privacy Policy</a></li>
</ul>
<h1 id="components">Components<a class="headerlink" href="#components" title="Permanent link">&para;</a></h1>
<ul>
<li><a href="/odftoolkit/odfdom/index.html">ODFDOM</a></li>
<li><a href="/odftoolkit/simple/index.html">Simple API</a></li>
<li><a href="/odftoolkit/conformance/ODFValidator.html">ODF Validator</a></li>
<li><a href="/odftoolkit/xsltrunner/ODFXSLTRunner.html">XSLT Runner</a></li>
</ul>
<h1 id="community">Community<a class="headerlink" href="#community" title="Permanent link">&para;</a></h1>
<ul>
<li><a href="/odftoolkit/get-involved.html">Get Involved</a></li>
<li><a href="/odftoolkit/mailing-lists.html">Mailing Lists</a></li>
<li><a href="/odftoolkit/people.html">People</a></li>
<li><a href="/odftoolkit/community-faqs.html">Community FAQs</a></li>
</ul>
<h1 id="development">Development<a class="headerlink" href="#development" title="Permanent link">&para;</a></h1>
<ul>
<li><a href="/odftoolkit/source.html">Source Code</a></li>
<li><a href="https://issues.apache.org/jira/browse/ODFTOOLKIT">Bug Tracker</a></li>
<li><a href="/odftoolkit/mvn-site/0.6-incubating/" target="_blank">Maven Reports</a></li>
<li><a href="/odftoolkit/website-local.html">Website</a></li>
<li><a href="/odftoolkit/developer-faqs.html">Developer FAQs</a></li>
</ul>
<h1 id="ppmc">PPMC<a class="headerlink" href="#ppmc" title="Permanent link">&para;</a></h1>
<ul>
<li><a href="/odftoolkit/ppmc-faqs.html">PPMC FAQs</a></li>
<li><a href="/odftoolkit/odftoolkit-release-guide.html">Release Guide</a>   </li>
</ul>
<h1 id="asf">ASF<a class="headerlink" href="#asf" title="Permanent link">&para;</a></h1>
<ul>
<li><a href="http://www.apache.org">Apache Software Foundation</a></li>
<li><a href="http://www.apache.org/foundation/thanks.html">Thanks</a></li>
<li><a href="http://www.apache.org/foundation/sponsorship.html">Become a Sponsor</a></li>
</ul>
  </div>
  <div id="contenta">
  
    <h1 class="title">How to edit the ODF Toolkit website</h1>
    <style type="text/css">
/* The following code is added by mdx_elementid.py
   It was originally lifted from http://subversion.apache.org/style/site.css */
/*
 * Hide class="elementid-permalink", except when an enclosing heading
 * has the :hover property.
 */
.headerlink, .elementid-permalink {
  visibility: hidden;
}
h2:hover > .headerlink, h3:hover > .headerlink, h1:hover > .headerlink, h6:hover > .headerlink, h4:hover > .headerlink, h5:hover > .headerlink, dt:hover > .elementid-permalink { visibility: visible }</style>
<p>This documentation shows how to edit the Apache ODF Toolkit
website. This includes creation of new pages, modification, and deletion - for files
and sub-directories.</p>
<h2 id="how-it-works-in-general">How it works in general<a class="headerlink" href="#how-it-works-in-general" title="Permanent link">&para;</a></h2>
<p>The website is hosted in a Content Management System (CMS). When you edit a web page
there are potentially four different versions of it to think about:</p>
<ol>
<li>There is the latest version of the page source stored in subversion.</li>
<li>There is your working copy of that page source, which you are editing.</li>
<li>There is the generated HTML from that source, in the staging directory.</li>
<li>There is the production version of the HTML, which is what the public sees.</li>
</ol>
<p>The general flow for updating the website is:</p>
<ol>
<li>You check out the latest version of the web page's source.</li>
<li>You edit the page source using <a href="http://daringfireball.net/projects/markdown/syntax">Markdown text syntax</a> (mdtext).</li>
<li>You commit the source into the repository.  (You will see the SVN commit mail with
    your log message.)</li>
<li>The commit automatically triggers a build that converts the markdown files 
    into HTML files in the staging directory.  (You will see a commit mail with "Staging
    update by buildbot" as log message.)</li>
<li>You verify that the staged webpage is correct and then tell the CMS to publish 
    the changes to the production directory.  (You will see a commit mail with "Publishing
    merge to odftoolkit site by <your Apache ID>" as log message.)</li>
</ol>
<p>The intent of this workflow is to allow committers flexibility in changing 
webpages and testing changes on a staging website, before moving these changes to
the public web site.</p>
<h2 id="command-line-editing-workflow">Command line editing workflow<a class="headerlink" href="#command-line-editing-workflow" title="Permanent link">&para;</a></h2>
<p>It is assumed that you have already checked out the code from the SVN repository
(https://svn.apache.org/repos/asf/incubator/odf).</p>
<p>Edit the file via your favorite editor like vi and finally commit via SVN:</p>
<div class="codehilite"><pre><span></span> vi myfile.mdtext
 svn ci -m&quot;My log message&quot; myfile.mdtext
</pre></div>


<p>Now wait a few seconds so that the entire website can be rebuilt.
Verify the staged webpage in a web browser at:</p>
<div class="codehilite"><pre><span></span> http://odftoolkit.staging.apache.org/odftoolkit/myfile.html
</pre></div>


<p>Then publish the site:</p>
<div class="codehilite"><pre><span></span>curl -sL http://s.apache.org/cms-cli | perl
</pre></div>


<p>If this does not work on your local machine just do it on "people.apache.org" by
executing this:</p>
<div class="codehilite"><pre><span></span>ssh -t &lt;user&gt;@people.apache.org publish.pl odftoolkit &lt;your Apache ID&gt;
</pre></div>


<h2 id="browser-based-editing-workflow">Browser-based editing workflow<a class="headerlink" href="#browser-based-editing-workflow" title="Permanent link">&para;</a></h2>
<h3 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h3>
<h4 id="browser-bookmark">Browser bookmark<a class="headerlink" href="#browser-bookmark" title="Permanent link">&para;</a></h4>
<p>Normally you see the webpage in your browser. To update this page with an
inline-editor and little preview you use the <a href="javascript:void(location.href='https://cms.apache.org/redirect?uri='+escape(location.href))">Apache CMS</a> JavaScript bookmarklet.  Drag that 
link to your browser's toolbar.  For more information see <a href="https://cms.apache.org/#bookmark">here</a>.</p>
<h4 id="apache-id">Apache ID<a class="headerlink" href="#apache-id" title="Permanent link">&para;</a></h4>
<p>Furthermore, you need an Apache ID to authenticate to the system.</p>
<h3 id="starting">Starting<a class="headerlink" href="#starting" title="Permanent link">&para;</a></h3>
<p>Browse to the webpage or directory you would like to edit and click on
the bookmarklet. Now click on the [Edit this directory] link on the top. The following
is displayed as content from the CMS.</p>
<h3 id="edit-an-existing-webpage">Edit an existing webpage<a class="headerlink" href="#edit-an-existing-webpage" title="Permanent link">&para;</a></h3>
<p>Click on the actions link [Edit] in the appropriate table cell for editing the
current file. If the file is not in this directory but in a subdirectory, just click on
the directory name (e.g., "docs/") to enter this directory.</p>
<p>Now you should see a new webpage with four fields:</p>
<ol>
<li>Upper left is the inline editor for text in markdown syntax.</li>
<li>Upper right shows the written text as a permanent preview or as HTML source code.</li>
<li>Below the editor you can enter a log message.</li>
<li>Enter a general header text, e.g., the license of the entered text.</li>
</ol>
<p>When you have finished writing your text, check the "Quick Commit" box, enter a
commit message and click on [Submit].  This commits your changes to the Subversion 
repository.</p>
<h3 id="verifying-the-staged-web-site">Verifying the staged web site<a class="headerlink" href="#verifying-the-staged-web-site" title="Permanent link">&para;</a></h3>
<p>As noted above, committing your changes triggers a build of the markdown files
into HTML in the staging directory.  Wait a few
seconds and then click the [Staged] link to view your web page as staged.</p>
<p>At this point you should test your web page.  Does it look right?  Any spelling 
errors? Do the links work?  If you've made substantial changes, perhaps test in
more than one browser.</p>
<p>Once you are satisfied that the page is correct, you are ready to publish it
to the production site.</p>
<h3 id="publishing-to-the-production-directory">Publishing to the production directory<a class="headerlink" href="#publishing-to-the-production-directory" title="Permanent link">&para;</a></h3>
<p>After you have edited your files and/or directories, you need now to publish your
modifications into production. For this please click on the link
[Publish site] on the top of the webpage. Enter a commit message on click 
on [Submit].  After a few seconds you can check the [Production] link to see the
live version of your changes.  </p>
<h3 id="create-a-new-webpage">Create a new webpage<a class="headerlink" href="#create-a-new-webpage" title="Permanent link">&para;</a></h3>
<p>When in the correct directory, at the top enter a name for the new text file (e.g.,
"my-file.mdtext"). Now you enter your text (see topic above).</p>
<h3 id="create-new-subdirectory">Create new subdirectory<a class="headerlink" href="#create-new-subdirectory" title="Permanent link">&para;</a></h3>
<p>When in the correct directory, at the top enter a name for the new directory (e.g.,
"my-dir/"). Make sure you entered a trailing "/"!</p>
<h3 id="delete-a-webpage-or-subdirectory">Delete a webpage or subdirectory<a class="headerlink" href="#delete-a-webpage-or-subdirectory" title="Permanent link">&para;</a></h3>
<p>When in the correct directory, click on the actions link [Delete] in the appropriate
table cell and enter a commit message. Finally click on [Submit].  Generally speaking
it is always a good idea to use the CMS to delete files and directories over using
the command-line svn interface, as the CMS will ensure everything gets deleted from
the staging (and eventually production) repository on commit.  If you use the command-
line interface instead, you will also need to manually delete the corresponding entities
in the staging repository in order for those changes to propagate to the production site.</p>
<h2 id="links">Links<a class="headerlink" href="#links" title="Permanent link">&para;</a></h2>
<p><a href="http://www.apache.org/dev/cmsref.html">CMS Documentation Reference</a></p>
  </div>

  <div id="footera">
    <div id="poweredby">
      <p><img src="/images/feather-small.gif"/><br/>Powered by the Apache CMS.</p>
    </div>
    <div id="copyrighta">
      <p>
	Apache "ODF Toolkit" is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator.
	Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and
	decision making process	have stabilized in a manner consistent with other successful ASF projects. While incubation status is
	not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has
	yet to be fully endorsed by the ASF.</p>
      <p>
	Copyright &copy; 2011 The Apache Software Foundation Licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.
	<a href="/openofficeorg/contact.html">Contact Us</a>
	<br />Apache and the Apache feather logos are trademarks of The Apache Software Foundation.
	<br />Other names appearing on the site may be trademarks of their respective owners.
      </p>
    </div>
  </div>

</body>
</html>
