<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
  <!--

    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE- 2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->

  <link href="/odftoolkit_website/css/odf.css" rel="stylesheet" type="text/css">
  
  <title>Release Process</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-28945571-1']);
    _gaq.push(['_trackPageview']);

    (function () {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

  </script>
</head>

<body>

  <div id="banner">
    <!--
    <div id="bannerright"><a alt="Apache Incubator" href="http://incubator.apache.org">
      <img id="asf-logo" alt="Apache Incubator" src="/odftoolkit_website/images/apache-incubator-logo.png"/></a></div>
    <div id="bannercenter"><br/>&nbsp;&nbsp;&nbsp;&nbsp;Apache ODF Toolkit (incubating)</div>
    -->
    <div id="bannerright"><a alt="The Document Foundation" href="https://www.documentfoundation.org/">
        <img id="tdf-logo" class="w350" alt="The Document Foundation"
          src="/odftoolkit_website/images/LibreOffice-Initial-Artwork-Logo-ColorLogoBasic-500px.png" /></a></div>
  </div>
  <div id="clear"></div>
  
  <div id="sidenav">
    <style type="text/css">
/* The following code is added by mdx_elementid.py
   It was originally lifted from http://subversion.apache.org/style/site.css */
/*
 * Hide class="elementid-permalink", except when an enclosing heading
 * has the :hover property.
 */
.headerlink, .elementid-permalink {
  visibility: hidden;
}
h2:hover > .headerlink, h3:hover > .headerlink, h1:hover > .headerlink, h6:hover > .headerlink, h4:hover > .headerlink, h5:hover > .headerlink, dt:hover > .elementid-permalink { visibility: visible }</style>
<h1 id="general">General<a class="headerlink" href="#general" title="Permanent link">&para;</a></h1>
<ul>
<li><a href="/odftoolkit_website/index.html">About</a></li>
<li><a href="/odftoolkit_website/downloads.html">Downloads</a></li>
<li><a href="/odftoolkit_website/license.html">License</a></li>
<li><a href="/odftoolkit_website/privacy.html">Privacy Policy</a></li>
</ul>
<h1 id="components">Components<a class="headerlink" href="#components" title="Permanent link">&para;</a></h1>
<ul>
<li><a href="/odftoolkit_website/odfdom/index.html">ODFDOM</a></li>
<li><a href="/odftoolkit_website/simple/index.html">Simple API (deprecated)</a></li>
<li><a href="/odftoolkit_website/conformance/ODFValidator.html">ODF Validator</a></li>
<li><a href="/odftoolkit_website/xsltrunner/ODFXSLTRunner.html">XSLT Runner</a></li>
</ul>
<h1 id="community">Community<a class="headerlink" href="#community" title="Permanent link">&para;</a></h1>
<ul>
<li><a href="/odftoolkit_website/get-involved.html">Get Involved</a></li>
<li><a href="/odftoolkit_website/mailing-lists.html">Mailing Lists</a></li>
<li><a href="/odftoolkit_website/people.html">People</a></li>
<li><a href="/odftoolkit_website/community-faqs.html">Community FAQs</a></li>
</ul>
<h1 id="development">Development<a class="headerlink" href="#development" title="Permanent link">&para;</a></h1>
<ul>
<li><a href="/odftoolkit_website/source.html">Source Code</a></li>
<li><a href="https://github.com/tdf/odftoolkit/issues">Bug Tracker</a></li>
<li><a href="/odftoolkit_website/javadoc/0.9.0-SNAPSHOT/" target="_blank">JavaDoc</a></li>
<li><a href="odftoolkit.org">Website</a></li>
<li><a href="/odftoolkit_website/developer-faqs.html">Developer FAQs</a></li>
</ul>
<h1 id="tdf">TDF<a class="headerlink" href="#tdf" title="Permanent link">&para;</a></h1>
<ul>
<li><a href="https://www.documentfoundation.org/">The Document Foundation</a></li>
<li><a href="https://www.documentfoundation.org/">Become a Sponsor</a></li>
</ul>
  </div>
  <div id="contenta">
    
      <h1 class="title">Release Process</h1>
      <style type="text/css">
/* The following code is added by mdx_elementid.py
   It was originally lifted from http://subversion.apache.org/style/site.css */
/*
 * Hide class="elementid-permalink", except when an enclosing heading
 * has the :hover property.
 */
.headerlink, .elementid-permalink {
  visibility: hidden;
}
h2:hover > .headerlink, h3:hover > .headerlink, h1:hover > .headerlink, h6:hover > .headerlink, h4:hover > .headerlink, h5:hover > .headerlink, dt:hover > .elementid-permalink { visibility: visible }</style>
<h3 id="incubator-release-steps">Incubator Release Steps<a class="headerlink" href="#incubator-release-steps" title="Permanent link">&para;</a></h3>
<ol>
<li>Environment setup for releasing artifacts (same for SNAPSHOTs and releases) -</li>
<li>
<p>Increase the default Java heap available to Maven (required for Java SE 6)  </p>
<div class="codehilite"><pre><span></span>export MAVEN_OPTS=&quot;-Xmx1024m -XX:MaxPermSize=256m&quot;
</pre></div>


<ol>
<li>Use the latest Sun 1.6.0 JDK</li>
<li>Use Maven 3.0.3 or later</li>
<li>Make sure the <a href="release-setup.html">Release Setup</a> steps have been performed.</li>
</ol>
</li>
<li>
<p>Prepare the source for release:     </p>
<ol>
<li>Cleanup JIRA so the Fix Version in issues resolved since the last release includes this release version correctly. Also, transition any Resolved issues to the Closed state.</li>
<li>Update the text files in a working copy of the project root -<ol>
<li>Update the CHANGELOG based on the Text release reports from JIRA.</li>
<li>Review and update README.txt if needed.</li>
<li>Commit any changes back to svn </li>
</ol>
</li>
<li>Stage any Roadmap or Release landing pages on the site.</li>
</ol>
</li>
<li>
<p>Checkout a clean copy of the trunk to release using command line svn.   </p>
</li>
</ol>
<p><em>Do not use Eclipse to do the checkout. The extra dot (.) files created by Eclipse throws off the rat:check processing.</em></p>
<ol>
<li>
<p>Use <code>mvn -P pedantic verify</code> to verify the source has the required headers before trying to release.</p>
</li>
<li>
<p>Do a dry run of the release:prepare step:  </p>
<div class="codehilite"><pre><span></span>$ mvn -Papache-release release:prepare -DdryRun<span class="o">=</span><span class="nb">true</span>
</pre></div>


</li>
</ol>
<p>The dry run will not commit any changes back to SVN and gives you the opportunity to verify that the release process will complete as expected. You will be prompted for the following information :
      * Release version - take the default 
      * SCM release tag - <em>DO NOT TAKE THE DEFAULT</em>  -: : 0.1-incubating
      * New development version - take the default
      * GPG Passprhase  </p>
<p><em>If you cancel a release:prepare before it updates the pom.xml versions, then use the release:clean goal to just remove the extra files that were created.</em></p>
<ol>
<li>
<p>Verify that the release process completed as expected</p>
<ol>
<li>The release plugin will create pom.xml.tag files which contain the changes that would have been committed to SVN. The only differences between pom.xml.tag and it's corresponding pom.xml file should be the version number.</li>
<li>If other formatting changes have been made you should review the changes and then commit them -   <div class="codehilite"><pre><span></span>$ svn commit -m <span class="s2">&quot;fixing formatting for release&quot;</span>
<span class="m">3</span>. Check release.properties and make sure that the scm properties have the right version. Sometimes the scm location can be the previous version not the next version.
<span class="m">4</span>. Verify signatures <span class="o">([</span>Verifying release signatures<span class="o">](</span>http://incubator.apache.org/rave/release-process.html#verify_signatures<span class="o">))</span>
</pre></div>


</li>
</ol>
</li>
<li>
<p>Once any failures or required updates have been committed to svn, rollback the release prepare files:  </p>
<div class="codehilite"><pre><span></span>$ mvn -Papache-release release:rollback
</pre></div>


</li>
<li>
<p>Prepare the release</p>
</li>
<li>
<p>Run the "release:prepare" step for real this time. You'll be prompted for the same version information.</p>
<div class="codehilite"><pre><span></span>  $ mvn release:prepare -Papache-release -DpreparationGoals=&quot;clean install cargo:package&quot;
</pre></div>


</li>
<li>
<p>Backup (zip or tar) your local release candidate directory in case you need to rollback the release after the next step is performed.</p>
</li>
<li>
<p>Perform the release</p>
</li>
</ol>
<p>This step will create a maven staging repository and site for use in testing and voting. </p>
<div class="codehilite"><pre><span></span>    $ mvn release:perform -Papache-release -Duser.name=&lt;your_apache_uid&gt;

*If your local OS userid doesn&#39;t match your Apache userid, then you&#39;ll have to also override the value provided by the OS to Maven for the site-deploy step to work. This is known to work for Linux, but not for Mac and unknown for Windows.*
*The maven-release-plugin is configured with goals &quot;deploy site site:deploy&quot; and will deploy the site files to a staging-site directory on people.apache.org.*
</pre></div>


<ol>
<li>Verify the release artifacts</li>
<li>Verify the HTML links in site are correct</li>
<li>Verify the staged artifacts in the nexus repo        <br />
           1. https://repository.apache.org/index.html
           2. Enterprise --&gt; Staging
           3. Staging tab --&gt; Name column --&gt; org.apache.rave
           4. Navigate through the artifact tree and make sure that all javadoc, sources, tests, jars, ... have .asc (GPG signature) and .md5 files. See http://people.apache.org/~henkp/repo/faq.html and http://www.apache.org/dev/release-signing.html#openpgp-ascii-detach-sig</li>
<li>Close the nexus staging repo<ol>
<li>https://repository.apache.org/index.html</li>
<li>Enterprise --&gt; Staging</li>
<li>Staging tab --&gt; Name column --&gt; org.apache.rave</li>
<li>Right click on the open staging repo (org.apache.rave-XXX) and select Close.</li>
</ol>
</li>
<li>
<p>Put the release candidate up for a vote</p>
<ol>
<li>Create a VOTE email thread on rave-dev@ to record votes as replies, like <a href="release-vote.txt">this</a></li>
<li>Create a DISCUSS email thread on rave-dev@ for any vote questions, <a href="release-discuss.txt">this</a></li>
<li>Perform a review of the release and cast your vote. See the following for more details on Apache releases </li>
</ol>
<p><a href="http://www.apache.org/dev/release.html">http://www.apache.org/dev/release.html</a><br />
<a href="http://incubator.apache.org/guides/releasemanagement.html">http://incubator.apache.org/guides/releasemanagement.html</a></p>
<ol>
<li>A -1 vote does not necessarily mean that the vote must be redone, however it is usually a good idea to rollback the release if a -1 vote is received. See - Recovering from a vetoed release</li>
<li>
<p>After the vote has been open for at least 72 hours, has at least three +1 PMC votes and no -1 votes, then post the results to the vote thread by -</p>
<ol>
<li>reply to the initial email and prepend to the original subject -</li>
</ol>
<p>[RESULTS]</p>
<ol>
<li>Include a list of everyone who voted +1, 0 or -1.</li>
</ol>
</li>
</ol>
</li>
<li>
<p>Put the release candidate up for an Incubator PMC vote</p>
<ol>
<li>
<p>Create a VOTE email thread on general@incubator to record votes as replies, like <a href="vote-ipmc.txt">this</a></p>
</li>
<li>
<p>After the vote has been open for at least 72 hours, has at least three +1 Incubator PMC votes and no -1 votes, then post the results to the vote thread by -</p>
<ol>
<li>replying to the initial email and prepend to the original subject -</li>
</ol>
<p>[RESULTS]</p>
<ol>
<li>Include a list of everyone who voted +1, 0 or -1.</li>
</ol>
</li>
</ol>
</li>
<li>
<p>Finalizing a release</p>
</li>
<li>
<p>Promote the staged nexus artifacts -</p>
<ol>
<li>https://repository.apache.org/index.html</li>
<li>Enterprise --&gt; Staging</li>
<li>Staging tab --&gt; Name column --&gt; org.apache.rave</li>
<li>
<p>Right click on the closed staging repo (org.apache.rave-XXX) and select Promote.</p>
</li>
<li>
<p>Copy the distribution artifacts over to the distribution area</p>
<p>$ ssh ${user.name}@people.apache.org<br />
  $ mkdir /www/www.apache.org/dist/incubator/rave/${project.version} <br />
  $ cd /www/www.apache.org/dist/incubator/rave/${project.version} <br />
  $ wget https://repository.apache.org/content/repositories/releases/org/apache/rave/rave-parent/${project.version}/rave-parent-${project.version}-source-release.zip  <br />
  $ wget https://repository.apache.org/content/repositories/releases/org/apache/rave/rave-parent/${project.version}/rave-parent-${project.version}-source-release.zip.asc <br />
  $ wget https://repository.apache.org/content/repositories/releases/org/apache/rave/rave-parent/${project.version}/rave-parent-${project.version}-source-release.zip.md5 <br />
  $ wget https://repository.apache.org/content/repositories/releases/org/apache/rave/rave-parent/${project.version}/rave-parent-${project.version}-source-release.zip.sha1    </p>
</li>
</ol>
<p><strong>Make sure all the copied files have g+rw set and only o+r set</strong></p>
<div class="codehilite"><pre><span></span>  $ find . -user <span class="cp">${</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="cp">}</span> -type f | xargs chmod 664
  $ find . -user <span class="cp">${</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="cp">}</span> -type d | xargs chmod 775
</pre></div>


<p><em>Note: All of the artifacts are in the maven repos, but we may create an assembly to publish in future releases</em></p>
<ol>
<li>Publish the staged website </li>
</ol>
</li>
<li>
<p>Update the JIRA versions page to mark the version as "released", and set the date to the date that the release was approved. You may also need to make a new release entry for the next release.</p>
</li>
<li>Announcing the release</li>
<li>After the mirrors have had time to update (24 hours to be on the safe side) update the wiki with pointers to the new release</li>
<li>Make a news announcement on the Rave homepage.</li>
<li>Make an announcement about the release on the rave-users@incubator.apache.org, rave-dev@incubator.apache.org, general@incubator.apache.org, and announce@apache.org list as per the Apache Announcement Mailing Lists page)</li>
</ol>
<h4 id="recovering-from-a-vetoed-release">Recovering from a vetoed release<a class="headerlink" href="#recovering-from-a-vetoed-release" title="Permanent link">&para;</a></h4>
<ol>
<li>
<p>Reply to the initial vote email and prepend to the original subject -</p>
<p>[CANCELED]</p>
</li>
<li>
<p>Rollback the version upgrades in trunk by either -</p>
<ol>
<li>
<p>Restore the 0.1-rc1.tar.gz and run</p>
<p>$ mvn -Papache-release release:rollback</p>
</li>
<li>
<p>Manually revert the versions in trunk to the prior version and commit</p>
</li>
</ol>
</li>
<li>
<p>Delete the svn tag created by the release:perform step -</p>
<p>$ svn del https://svn.apache.org/repos/asf/incubator/rave/tags/0.1-incubating -m "deleting tag from rolled back release"</p>
</li>
<li>
<p>Drop the nexus staging repo</p>
<ol>
<li>https://repository.apache.org/index.html</li>
<li>Enterprise --&gt; Staging</li>
<li>Staging tab --&gt; Name column --&gt; org.apache.rave</li>
<li>Right click on the closed staging repo (org.apache.rave-XXX) and select Drop.</li>
</ol>
</li>
<li>
<p>Remote the staged site</p>
</li>
<li>
<p>Make the required updates that caused the vote to be canceled</p>
</li>
<li>Spin another release candidate!</li>
</ol>
<h4 id="verifying-release-signatures">Verifying release signatures<a class="headerlink" href="#verifying-release-signatures" title="Permanent link">&para;</a></h4>
<p>On unix platforms the following command can be executed -</p>
<div class="codehilite"><pre><span></span>  for file in `find . -type f -iname &#39;*.asc&#39;`
  do
      gpg --verify <span class="cp">${</span><span class="nb">file</span><span class="cp">}</span> 
  done
</pre></div>


<p>You'll need to look at the output to ensure it contains only good signatures -</p>
<p>gpg: Good signature from ...
gpg: Signature made ...</p>
    </div>
    
    <div id="footera">
      <div id="copyrighta">
        <p><a href="https://www.libreoffice.org/imprint" target="_blank">Impressum (Legal Info)</a> | <a
            href="https://www.libreoffice.org/privacy" target="_blank">Privacy Policy (Datenschutzerklärung)</a> | <a
            href="https://www.documentfoundation.org/statutes.pdf" target="_blank">Statutes (non-binding English
            translation)</a> - <a href="https://www.documentfoundation.org/satzung.pdf" target="_blank">Satzung (binding
            German version)</a> | Copyright information: Unless otherwise specified, all text and images on this website
          are licensed under the <a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank">Creative
            Commons Attribution-Share Alike 3.0 License</a>. This does not include the source code of LibreOffice, which
          is licensed under the <a href="https://www.libreoffice.org/download/license/" target="_blank">Mozilla Public
            License v2.0</a>. “LibreOffice” and “The Document Foundation” are registered trademarks of their
          corresponding registered owners or are in actual use as trademarks in one or more countries. Their respective
          logos and icons are also subject to international copyright laws. Use thereof is explained in our <a
            href="https://wiki.documentfoundation.org/TradeMark_Policy" target="_blank">trademark policy</a>.
          LibreOffice was based on OpenOffice.org.</p>
      </div>
    </div>   
  </div>
</body>

</html>