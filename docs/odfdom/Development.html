<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<!--

    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE- 2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->

<link href="/css/odf.css" rel="stylesheet" type="text/css">

<title>Development</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-28945571-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>

<body>
  <div id="banner">
   <!-- <div id="bannerleft"><a alt="Apache ODF Toolkit (incubating)" href="http://incubator.apache.org/odftoolkit/">
      <img id="logo" alt="Apache ODF Toolkit (Incubating)" src="/odftoolkit/images/ooo-logo.png"/></a></div> -->
    <div id="bannerright"><a alt="Apache Incubator" href="http://incubator.apache.org">
      <img id="asf-logo" alt="Apache Incubator" src="/images/apache-incubator-logo.png"/></a></div>
   <div id="bannercenter"><br/>&nbsp;&nbsp;&nbsp;&nbsp;Apache ODF Toolkit (incubating)</div>
  </div>
  <div id="clear"></div>
  
  <div id="sidenav">
    <style type="text/css">
/* The following code is added by mdx_elementid.py
   It was originally lifted from http://subversion.apache.org/style/site.css */
/*
 * Hide class="elementid-permalink", except when an enclosing heading
 * has the :hover property.
 */
.headerlink, .elementid-permalink {
  visibility: hidden;
}
h2:hover > .headerlink, h3:hover > .headerlink, h1:hover > .headerlink, h6:hover > .headerlink, h4:hover > .headerlink, h5:hover > .headerlink, dt:hover > .elementid-permalink { visibility: visible }</style>
<h1 id="general">General<a class="headerlink" href="#general" title="Permanent link">&para;</a></h1>
<ul>
<li><a href="/odftoolkit/index.html">About</a></li>
<li><a href="/odftoolkit/downloads.html">Downloads</a></li>
<li><a href="http://incubator.apache.org/projects/odftoolkit.html">Incubator page</a></li>
<li><a href="/odftoolkit/license.html">License</a></li>
<li><a href="/odftoolkit/privacy.html">Privacy Policy</a></li>
</ul>
<h1 id="components">Components<a class="headerlink" href="#components" title="Permanent link">&para;</a></h1>
<ul>
<li><a href="/odftoolkit/odfdom/index.html">ODFDOM</a></li>
<li><a href="/odftoolkit/simple/index.html">Simple API</a></li>
<li><a href="/odftoolkit/conformance/ODFValidator.html">ODF Validator</a></li>
<li><a href="/odftoolkit/xsltrunner/ODFXSLTRunner.html">XSLT Runner</a></li>
</ul>
<h1 id="community">Community<a class="headerlink" href="#community" title="Permanent link">&para;</a></h1>
<ul>
<li><a href="/odftoolkit/get-involved.html">Get Involved</a></li>
<li><a href="/odftoolkit/mailing-lists.html">Mailing Lists</a></li>
<li><a href="/odftoolkit/people.html">People</a></li>
<li><a href="/odftoolkit/community-faqs.html">Community FAQs</a></li>
</ul>
<h1 id="development">Development<a class="headerlink" href="#development" title="Permanent link">&para;</a></h1>
<ul>
<li><a href="/odftoolkit/source.html">Source Code</a></li>
<li><a href="https://issues.apache.org/jira/browse/ODFTOOLKIT">Bug Tracker</a></li>
<li><a href="/odftoolkit/mvn-site/0.6-incubating/" target="_blank">Maven Reports</a></li>
<li><a href="/odftoolkit/website-local.html">Website</a></li>
<li><a href="/odftoolkit/developer-faqs.html">Developer FAQs</a></li>
</ul>
<h1 id="ppmc">PPMC<a class="headerlink" href="#ppmc" title="Permanent link">&para;</a></h1>
<ul>
<li><a href="/odftoolkit/ppmc-faqs.html">PPMC FAQs</a></li>
<li><a href="/odftoolkit/odftoolkit-release-guide.html">Release Guide</a>   </li>
</ul>
<h1 id="asf">ASF<a class="headerlink" href="#asf" title="Permanent link">&para;</a></h1>
<ul>
<li><a href="http://www.apache.org">Apache Software Foundation</a></li>
<li><a href="http://www.apache.org/foundation/thanks.html">Thanks</a></li>
<li><a href="http://www.apache.org/foundation/sponsorship.html">Become a Sponsor</a></li>
</ul>
  </div>
  <div id="contenta">
  
    <h1 class="title">Development</h1>
    <style type="text/css">
/* The following code is added by mdx_elementid.py
   It was originally lifted from http://subversion.apache.org/style/site.css */
/*
 * Hide class="elementid-permalink", except when an enclosing heading
 * has the :hover property.
 */
.headerlink, .elementid-permalink {
  visibility: hidden;
}
h2:hover > .headerlink, h3:hover > .headerlink, h1:hover > .headerlink, h6:hover > .headerlink, h4:hover > .headerlink, h5:hover > .headerlink, dt:hover > .elementid-permalink { visibility: visible }</style>
<p><strong>Get and Build the Source Code</strong></p>
<ol>
<li>Install latest Mercurial</li>
<li>
<p>Setup Mercurial (optional):  <br />
Config file $Hg Install Dir\Mercurial.ini on Windows or <Hg Install Dir>/.hgrc on Unix.  <br />
Enhance the default configuration, using GIT diff and enable <a href="http://mercurial.selenic.com/wiki/Win32TextExtension">default plugin</a> avoid different line breaks in the source.  </p>
<p>[ui]
username = your Name <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#121;&#111;&#117;&#114;&#76;&#111;&#103;&#105;&#110;&#78;&#97;&#109;&#101;&#64;&#111;&#100;&#102;&#116;&#111;&#111;&#108;&#107;&#105;&#116;&#46;&#111;&#114;&#103;">&#121;&#111;&#117;&#114;&#76;&#111;&#103;&#105;&#110;&#78;&#97;&#109;&#101;&#64;&#111;&#100;&#102;&#116;&#111;&#111;&#108;&#107;&#105;&#116;&#46;&#111;&#114;&#103;</a>
;merge = your-merge-program (or internal:merge)</p>
<p>[diff]
git = 1</p>
<p>[defaults]
diff=-p -U 8</p>
<p>[extensions]<br />
# Enables mercurial EOL extension for line break handling <br />
# See http://mercurial.selenic.com/wiki/EolExtension (bundled since 1.5.4)<br />
eol =</p>
<p># It'll remove unknown files and empty directories by default.  <br />
# Usually you call 'hg update -C' and 'hg purge' in sequence <br />
# See http://mercurial.selenic.com/wiki/PurgeExtension  (bundled)<br />
hgext.purge=</p>
<p>[eol]
# Converts mixed line ending within a file to LF (Unix) format   <br />
# before adding the file to the source repository  <br />
# See http://mercurial.selenic.com/wiki/EolExtension  <br />
only-consistent = False</p>
</li>
<li>
<p>Get the <a href="http://odftoolkit.org/projects/odfdom/sources">ODFDOM source code</a> from the odfdom~developer <a href="http://www.selenic.com/mercurial/wiki/">Mercurial</a> repository. Please see below for a short introduction to using Mercurial on odftoolkit.org. There's also a more general <a href="SourceControl.html">help</a> on how to use source control systems on odftoolkit.org. The command <br />
<code>hg clone https://odftoolkit.org/hg/odfdom~developer</code> will download the repository into a new directory.  <br />
Please note that by this you'll get the latest changeset. If you for example want stable release 0.8.6, you may want to use<br />
<code>hg clone https://odftoolkit.org/hg/odfdom~developer -r v0.8.6</code></p>
</li>
</ol>
<p>ODFDOM Developers however always work on the latest changeset. <br />
Now get and install <a href="http://maven.apache.org/">Apache Maven</a>. On command line test your installation with "mvn -v".</p>
<p>If Maven is correctly installed, change into the project directory and build with command "mvn".   </p>
<p><strong>Set up ODFDOM Development Environment</strong></p>
<p><strong><em>Using Eclipse IDE</em></strong></p>
<p>You can also set up your own ODFDOM development environment in Eclipse.</p>
<ol>
<li>Install <a href="http://java.sun.com/javase/downloads/index_jdk5.jsp">Java / JDK 5</a> (you might use <a href="http://java.sun.com/javase/downloads/index.jsp">JDK 6</a> if you do not recontribute)</li>
<li>Install <a href="http://www.eclipse.org">Eclipse</a>.</li>
<li>Open Eclipse, choose "Window-&gt;Preferences-&gt;Java-&gt;Installed JREs", add JDK 5 as a installed JRE, and check it to add to the build path of a java project by default.</li>
<li>Install Maven Plugin for Eclipse, see http://m2eclipse.sonatype.org/installing-m2eclipse.html</li>
<li>Install Mercurial Plugin for Eclipse, see http://javaforge.com/project/HGE#download</li>
<li>Get the source code with Mercurial as described above.  </li>
<li>Import ODFDOM Maven project: Choose "File-&gt;Import-&gt;Maven-&gt;Existing Maven project"</li>
</ol>
<p><strong><em>Using Netbeans IDE</em></strong>     </p>
<p>To establish your own ODFDOM development environment:</p>
<ol>
<li>Install <a href="http://java.sun.com/javase/downloads/index_jdk5.jsp">Java / JDK 5</a> (you might use <a href="http://java.sun.com/javase/downloads/index.jsp">JDK 6</a> if you do not recontribute)</li>
<li>Install <a href="http://netbeans.org">NetBeans 6.x</a>. In case you are new to Netbeans, there are several nice <a href="http://www.netbeans.org/kb/trails/platform.html">tutorials</a> available.</li>
<li>Get the source code with Mercurial as described above.</li>
<li>Start Netbeans,  choose "File-&gt;Open Project.." from the Netbeans menu and select the ODFDOM directory.
As the ODFDOM source bundle comes together with Netbeans project files, ODFDOM opens as a pre-configured project.
You still have the opportunity to work solely with <a href="http://maven.apache.org/">Maven</a> directly on the command line instead having the IDE GUI comfort provided by Netbeans.</li>
</ol>
<p>Since Netbeans 6.1 the <a href="http://wiki.netbeans.org/MercurialVersionControl">Mercurial plugin</a> is part of the IDE, which help you to track the changes being made and ease providing patches. Select in the menu among 'Versioning' the desired Mercurial commands.</p>
<p>After the commitment of your changed files, you need to pull the latest updates from the server, perhaps merge them with your changes and finally push your changes to the repository using in the menu Versioning-&gt;Mercurial-&gt;Share-&gt;Push Other...
and adding <code>https://myUserName:myPassword@odftoolkit.org/hg/odfdom~developer</code></p>
<p><strong>Command Line Tools</strong>    </p>
<p><strong><em>Mercurial</em></strong>       </p>
<p><a href="http://mercurial.selenic.com/wiki/">Mercurial</a> is the version control system used for ODFDOM development.</p>
<p>Here a list of the most frequently used commands:
<pre>
  // Get source code into a new local repository
  hg clone https://odftoolkit.org/hg/odfdom~developer [new folder name]
  // See if there are updates
  hg in
  // See if you have local changes
  hg status
  // If there are no local changes: Update
  hg pull
  hg update
  // Display the latest 3 entries of the revision history
  hg log -l 3
  // Display only the latest entry of the revision history
  hg tip
  // Register all locally created or deleted files. 
  // Please carefully check the output of "hg status" first
  hg addremove
  // Safe alternatives
  hg add <myNewFile>
  hg remove <myUnnecessaryFile>
  hg remove -A <myAlreadyDeletedFile><br />
  // Commit your changes locally and display their revision number
  hg commit -A -u "your Name" -m "#bug XY# Description of changes"
  hg tip
  // Export your locally committed changes as patch
  hg export -a -g -o ../myChanges.patch <RevisionNumbersOfYourCommit>
  // Import changes into your local repository
  hg import --no-commit ../someFile.patch
  // Get help
  hg help
  // Get help about a special command
  hg help <command>
  hg help export
  hg help addremove
  ...
</pre>
In case you do changes for a bug or feature request, please export them as a patch and attach them to the bug's entry on the <a href="http://odftoolkit.org/bugzilla/buglist.cgi?product=odfdom&amp;order=bugs.bug_id">issue list</a>. If there's no such entry, please create one first.</p>
<p>That way others will review your patch for you. If everything is ok, the reviewer will push your changes to the global repository. This procedure is the same for all developers and is meant to keep up code quality.</p>
<p><strong><em>Maven</em></strong><br />
<a href="http://maven.apache.org/">Maven</a> is the build manager used for ODFDOM development.
<pre>
  // Build the project and create target/odfdom.jar
  mvn
  // Workaround: Ignore failed test when building
  mvn -Dmaven.test.failure.ignore=true clean install
  // Create javadoc
  mvn javadoc:javadoc
  // Generate DOM layer elements and attributes from RelaxNG
  mvn clean test -P codegen
  // Generate code coverage documentation in
  // <PROJECT_DIR>/target/site/cobertura/index.html
  // see http://mojo.codehaus.org/cobertura-maven-plugin/
  mvn cobertura:cobertura
</pre></p>
<p><strong>Coding Guidelines</strong>
ODFDOM take advantage of the existing <a href="http://java.sun.com/docs/codeconv/html/CodeConvTOC.doc.html">Java Coding Guidelines</a>. </p>
<p><strong><em>Naming Convention</em></strong>  <br />
Aside of <a href="http://java.sun.com/docs/codeconv/html/CodeConventions.doc8.html#367">the Naming Convention of Java Coding Guideline</a>, we use an 'm' as prefix for member object variables, e.g. "mParentDocument". 
Note: There should be NO datatype prefix being used as 'i', 's', etc.</p>
<p><strong><em>Source Code Format</em></strong> <br />
Although Maven may support source code formatting it has not yet been enabled.
Instead the automated formatting via the IDE is used (e.g. by Netbeans via the context menu - Format).  </p>
<p><strong><em>Spaces</em></strong> <br />
To allow a customized indentation within the IDE based on the user's taste, the indent shall be done using TABs.
For instance, Svante uses a 4 whitespace indent by TABs configured within Netbeans.</p>
<p><strong><em>Line Feed</em></strong> <br />
There have been recently problems with merging sources using Mercurial when working with different platforms (windows/unix).
For this reason, some additional Mercurial configuration  shall be used to unify the interal line feed handling.</p>
<p><strong>Current and Future Work</strong></p>
<p>Especially the convenient layer will grow on demand. As ODFDOM should be the base of many future ODF projects, a high quality is desired. Therefore automatic tests are obligatory for all new sources of the Java reference implementation.</p>
<p>The development is being discussed on the <a href="mailto:odf-dev@incubator.apache.org">dev mailing list</a>.</p>
<p>While we still plan to deliver quarterly results, we created some large feature groups/headlines for the upcoming versions</p>
<p>In general when building a layered API, it seemed reasonable to start from the
button to base higher APIs on the stable lower layers:</p>
<p><strong><em>Version 0.9</em></strong></p>
<ul>
<li>Complete ODF 1.2 PKG functionality (package), e.g.   </li>
<li>Add PKG validation feature</li>
<li>Complete ODF 1.2 DOM functionality, e.g.</li>
<li>Style handling refactoring</li>
<li>Add DOM validation feature</li>
<li>RDF metadata feature</li>
<li>Some create child element methods (ie. office:body and style:style element) dependent on attribute value</li>
<li>ODF 1.2 DOC API </li>
<li>Create a lean convenient API working on the complete DOM layer, but hiding XML design details of ODF 1.2</li>
<li>Complete ODF 1.2 TEST API (largly dependent on DOC API, but should be developed in parallel)</li>
</ul>
<p><strong><em>Version 1.0</em></strong>   </p>
<ul>
<li>PKG performance tweaks</li>
<li>DOM performance tweaks</li>
<li>important DOC functionality</li>
<li>Test coverage</li>
</ul>
<p>Please see also for <a href="https://odftoolkit.org/bugzilla/buglist.cgi?query_format=advanced&amp;short_desc_type=allwordssubstr&amp;short_desc=&amp;product=odfdom&amp;long_desc_type=allwordssubstr&amp;long_desc=&amp;bug_file_loc_type=allwordssubstr&amp;bug_file_loc=&amp;status_whiteboard_type=allwordssubstr&amp;status_whiteboard=&amp;bug_status=UNCONFIRMED&amp;bug_status=NEW&amp;bug_status=ASSIGNED&amp;bug_status=REOPENED&amp;emailtype1=substring&amp;email1=&amp;emailtype2=substring&amp;email2=&amp;bugidtype=include&amp;bug_id=&amp;votes=&amp;chfieldfrom=&amp;chfieldto=Now&amp;chfieldvalue=&amp;cmdtype=doit&amp;order=Reuse+same+sort+as+last+time&amp;field0-0-0=noop&amp;type0-0-0=noop&amp;value0-0-0=">open tasks</a>.</p>
<p><strong>ODFDOM Code Generator</strong>  </p>
<p>The ODFDOM Code Generator is used to generate the core Classes for ODFDOM which are a typed mapping of the ODF elements on real Java Classes. For the future we also plan to generate ODFDOM e.g. C# ( .NET ) for other programming languages with this generator. Take a look at this page <a href="ODFDOM-Code-Generator.html">ODFDOM Code Generator</a> to see how the generator works in general (will be updated soon). We are moving toward treating the code generator as a separate component. The repository <a href="http://odftoolkit.org/hg/odfdom~relaxng2template">http://odftoolkit.org/hg/odfdom~relaxng2template</a> is the new home of the code generator. It may move to its own project on this site at some point.</p>
<p><strong>Other Useful Pages</strong>     </p>
<ul>
<li><a href="ODFDOM-Class-Structure.html">Class Structure in ODFDOM</a>  </li>
<li><a href="ConvenienceLayerDesignIdeas.html">Convenience Layer Design Ideas</a></li>
</ul>
  </div>

  <div id="footera">
    <div id="poweredby">
      <p><img src="/images/feather-small.gif"/><br/>Powered by the Apache CMS.</p>
    </div>
    <div id="copyrighta">
      <p>
	Apache "ODF Toolkit" is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator.
	Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and
	decision making process	have stabilized in a manner consistent with other successful ASF projects. While incubation status is
	not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has
	yet to be fully endorsed by the ASF.</p>
      <p>
	Copyright &copy; 2011 The Apache Software Foundation Licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.
	<a href="/openofficeorg/contact.html">Contact Us</a>
	<br />Apache and the Apache feather logos are trademarks of The Apache Software Foundation.
	<br />Other names appearing on the site may be trademarks of their respective owners.
      </p>
    </div>
  </div>

</body>
</html>
